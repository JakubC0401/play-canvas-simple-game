pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);this._add.length&&(this._tweens=this._tweens.concat(this._add),this._add.length=0)}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.EASE_LINEAR,this._sv={},this._ev={}};Tween.prototype={to:function(t,i,e,s,n,r){return t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this},from:function(t,i,e,s,n,r){return t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,s,n,r){return t instanceof pc.Quat?this._properties={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._slerp=!0,this},start:function(){if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(var t in this._properties)this._sv[t]=this._properties[t],this._ev[t]=this.target[t];if(this._slerp){this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z);var i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z;this._fromQuat.setFromEulerAngles(i,e,s)}}else{for(var t in this._properties)this._sv[t]=this.target[t],this._ev[t]=this._properties[t];if(this._slerp){this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z);i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z;this._toQuat.setFromEulerAngles(i,e,s)}}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time=this.time-this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,s,n=this.time/this.duration,r=this.easing(n);for(var h in this._properties)e=this._sv[h],s=this._ev[h],this.target[h]=e+(s-e)*r;if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtify(!0),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties)tmp=this._sv[i],this._sv[i]=this._ev[i],this._ev[i]=tmp;this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceIn=function(t){return 1-BounceOut(1-t)},BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,s=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=s*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*.5+1)}}}()),function(){var t=pc.Application.getApplication();t&&(t._tweenManager=new pc.TweenManager(t),t.on("update",(function(i){t._tweenManager.update(i)})),pc.Application.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.on("destroy",(function(){e.stop()})),i&&i.element&&(e.element=element),e})}();pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);this._add.length&&(this._tweens=this._tweens.concat(this._add),this._add.length=0)}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.EASE_LINEAR,this._sv={},this._ev={}};Tween.prototype={to:function(t,i,e,s,n,r){return t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this},from:function(t,i,e,s,n,r){return t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,s,n,r){return t instanceof pc.Quat?this._properties={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._slerp=!0,this},start:function(){if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(var t in this._properties)this._sv[t]=this._properties[t],this._ev[t]=this.target[t];if(this._slerp){this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z);var i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z;this._fromQuat.setFromEulerAngles(i,e,s)}}else{for(var t in this._properties)this._sv[t]=this.target[t],this._ev[t]=this._properties[t];if(this._slerp){this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z);i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z;this._toQuat.setFromEulerAngles(i,e,s)}}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time=this.time-this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,s,n=this.time/this.duration,r=this.easing(n);for(var h in this._properties)e=this._sv[h],s=this._ev[h],this.target[h]=e+(s-e)*r;if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtify(!0),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties)tmp=this._sv[i],this._sv[i]=this._ev[i],this._ev[i]=tmp;this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceIn=function(t){return 1-BounceOut(1-t)},BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,s=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=s*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*.5+1)}}}()),function(){var t=pc.Application.getApplication();t&&(t._tweenManager=new pc.TweenManager(t),t.on("update",(function(i){t._tweenManager.update(i)})),pc.Application.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.on("destroy",(function(){e.stop()})),i&&i.element&&(e.element=element),e})}();pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);this._add.length&&(this._tweens=this._tweens.concat(this._add),this._add.length=0)}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.EASE_LINEAR,this._sv={},this._ev={}};Tween.prototype={to:function(t,i,e,s,n,r){return t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this},from:function(t,i,e,s,n,r){return t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,s,n,r){return t instanceof pc.Quat?this._properties={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._slerp=!0,this},start:function(){if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(var t in this._properties)this._sv[t]=this._properties[t],this._ev[t]=this.target[t];if(this._slerp){this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z);var i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z;this._fromQuat.setFromEulerAngles(i,e,s)}}else{for(var t in this._properties)this._sv[t]=this.target[t],this._ev[t]=this._properties[t];if(this._slerp){this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z);i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z;this._toQuat.setFromEulerAngles(i,e,s)}}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time=this.time-this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,s,n=this.time/this.duration,r=this.easing(n);for(var h in this._properties)e=this._sv[h],s=this._ev[h],this.target[h]=e+(s-e)*r;if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtify(!0),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties)tmp=this._sv[i],this._sv[i]=this._ev[i],this._ev[i]=tmp;this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceIn=function(t){return 1-BounceOut(1-t)},BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,s=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=s*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*.5+1)}}}()),function(){var t=pc.Application.getApplication();t&&(t._tweenManager=new pc.TweenManager(t),t.on("update",(function(i){t._tweenManager.update(i)})),pc.Application.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.on("destroy",(function(){e.stop()})),i&&i.element&&(e.element=element),e})}();var IA=pc.createScript("IA");IA.states={idle:{animation:"idle.json"},walk:{animation:"walk.json"},run:{animation:"run.json"},right:{animation:"right.json"},left:{animation:"left.json"},attack:{animation:"attack.json"}},IA.attributes.add("target",{type:"entity"}),IA.prototype.reset=function(t){this.wandering=!1,this.waiting=!1,this.walking=!1,this.rotating=!1,this.attacking=!1,this.chasing=!1,this.waitingTime=1e3*this.random(2,4),this.rotatingTime=500*this.random(2,4),this.walkingTime=1e3*this.random(2,4),this.runningTime=2e3,this.attackingTime=1e3,this.rotateSpeed=70,this.walkSpeed=360,this.runMultiplier=3,this.blending=.2,this.result=null,this.direction=new pc.Vec3,this.range=15,this.melee=1.5,this.state=null,this.waiting=!0,this.wandering=!0,this.animate("idle"),this.waitingStartTime=Date.now()},IA.prototype.initialize=function(){this.entity.collision.on("collisionstart",this.onCollisionStart,this),this.enemyhealth=100,this.reset()},IA.prototype.update=function(t){this.wandering?(this.target&&this.search(t),this.waiting&&this.wait(t),this.rotating&&this.rotate(t),this.walking&&this.walk(t)):(this.chasing&&this.chase(t),this.attacking&&this.attack(t))},IA.prototype.wait=function(t){"idle"!==this.state&&(console.log("waiting..."),this.animate("idle"),this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO),Date.now()-this.waitingStartTime>this.waitingTime&&(this.waiting=!1,this.waitingTime=1e3*this.random(2,4),this.rotatingStartTime=Date.now(),this.rotating=!0)},IA.prototype.rotate=function(t){"right"!==this.state&&"left"!==this.state&&(console.log("rotating..."),this.animate(Math.random()>=.5?"right":"left")),this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.applyTorque(pc.Vec3.UP.clone().scale(this.rotateSpeed*("right"===this.state?-1:1))),Date.now()-this.rotatingStartTime>this.rotatingTime&&(this.rotating=!1,this.rotatingTime=500*this.random(2,4),this.walkingStartTime=Date.now(),this.walking=!0)},IA.prototype.walk=function(t){"walk"!==this.state&&(console.log("walking..."),this.animate("walk")),this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO,this.entity.rigidbody.applyForce(this.entity.forward.clone().scale(this.walkSpeed)),Date.now()-this.walkingStartTime>this.walkingTime&&(this.walking=!1,this.walkingTime=1e3*this.random(2,4),this.waitingStartTime=Date.now(),this.waiting=!0)},IA.prototype.search=function(t){console.log("searching..."),this.result=this.app.systems.rigidbody.raycastFirst(this.entity.getPosition(),this.target.getPosition()),null!==this.result&&this.result.entity.name.toLowerCase().includes("player")&&this.result.entity.getPosition().sub(this.entity.getPosition()).length()<=this.range&&(console.log("found...!"),this.wandering=!1,this.chasing=!0)},IA.prototype.chase=function(t){this.entity.getPosition(),this.target.getPosition();var i=this.target.getPosition().clone().sub(this.entity.getPosition()),e=this.entity.forward.angle(i.normalize());this.direction.set(0,e,0),"run"!==this.state&&(console.log("chasing..."),this.entity.rigidbody.enabled=!1,this.entity.rotate(this.direction),this.entity.rigidbody.enabled=!0,this.animate("run"),this.runningStartTime=Date.now()),this.entity.rigidbody.applyForce(this.entity.forward.scale(this.walkSpeed*this.runMultiplier)),this.target.getPosition().clone().sub(this.entity.getPosition()).length()<=this.melee&&(console.log("reaching..."),this.chasing=!1,this.attacking=!0,this.attackingStartTime=Date.now()),Date.now()-this.runningStartTime>this.runningTime&&!this.attacking&&(console.log("refacing..."),this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO,this.animate("idle"))},IA.prototype.attack=function(t){this.entity.getPosition(),this.target.getPosition();var i=this.target.getPosition().clone().sub(this.entity.getPosition()),e=this.entity.forward.angle(i.normalize());"attack"!==this.state&&(console.log("attacking..."),this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO,this.animate("attack")),(this.target.getPosition().clone().sub(this.entity.getPosition()).length()>this.melee||Math.abs(e)>=20)&&Date.now()-this.attackingStartTime>this.attackingTime&&(console.log("refacing..."),this.wandering=!0,this.attacking=!1)},IA.prototype.animate=function(t){var i=IA.states;this.state=t,this.entity.children[0].animation.play(i[t].animation,this.blending)},IA.prototype.random=function(t,i){return Math.floor(Math.random()*(i-t+1))+t},IA.prototype.onCollisionStart=function(t){t.other.tags.has("bullet")&&(this.enemyhealth=this.enemyhealth-10,t.other.destroy())},0===this.enemyhealth&&this.entity.destroy();!function(){for(var t=[],o=[],r=0,a=0,c=0;c<256;c++)o.push(new pc.Vec3),t.push(new pc.Quat);function Q(o){var a=t[255&r++];return!1!==o&&a.copy(o||pc.Quat.IDENTITY),a}function V(t,r,c){var n=o[255&a++];if(void 0!==r&&void 0!==c){var e=n.data;return e[0]=t,e[1]=r,e[2]=c,n}if(void 0!==t){var p=n.data,i=t.data;p[0]=i[0],p[1]=i[1],p[2]=i[2]}return n}function orthogonal(t){var o=Math.abs(t.x),r=Math.abs(t.y),a=Math.abs(t.z),c=o<r?o<a?pc.Vec3.RIGHT:pc.Vec3.FORWARD:r<a?pc.Vec3.UP:pc.Vec3.FORWARD;return V().cross(t,c)}pc.Vec3.temp=V,pc.Quat.temp=Q,pc.Vec3.prototype.angle=function(t,o){return function angleBetween(t,o,r){return r=r||pc.Vec3.UP,Math.atan2(V().cross(t,o).dot(r),t.dot(o))*pc.math.RAD_TO_DEG}(this,t,o)},pc.Quat.prototype.fromToRotation=function(t,o){return function fromToRotation(t,o,r){var a=t.dot(o);if(r=r||Q(),a<=-.999){r.w=0;var c=orthogonal(t).normalize();return r.x=c.x,r.y=c.y,r.z=c.z,r}var n=V(t).add(o).scale(.5);r.w=t.dot(n);var e=V().cross(t,n);return r.x=e.x,r.y=e.y,r.z=e.z,r.normalize()}(t,o,this)},pc.Quat.prototype.twist=function(t){var o=orthogonal(t),r=this.transformVector(o,V()),a=V(r).sub(V(t).scale(r.dot(t))).normalize(),c=Math.acos(o.dot(a))*pc.math.RAD_TO_DEG;return V(this.x,this.y,this.z).dot(t)>0?-c:c};var n=new pc.Mat4;pc.Quat.prototype.lookAt=function(t,o,r){return n.setLookAt(t,o,r||pc.Vec3.UP),this.setFromMat4(n),this};var e=pc.Vec3.prototype.mul;pc.Vec3.prototype.mul=function(t,o,r){return t instanceof pc.Quat?t.transformVector(this,this):e.call(this,t,o,r)}}();var Shoot=pc.createScript("shoot");Shoot.attributes.add("power",{type:"number",default:1}),Shoot.attributes.add("bullet",{type:"entity"}),Shoot.prototype.initialize=function(){},Shoot.prototype.update=function(t){this.app.keyboard.wasPressed(pc.KEY_X)&&this.shoot()},Shoot.prototype.shoot=function(t){var o=this.bullet.clone();this.app.root.addChild(o);var e=this.entity;this.force=new pc.Vec3,this.force.copy(e.forward),this.force.scale(this.power);var i=e.getPosition(),a=e.forward;i.add(a.scale(5+.01*e.rigidbody.linearVelocity.length())),o.setPosition(i);var r=e.getRotation();o.setRotation(r),o.rotateLocal(90,0,0),o.setLocalEulerAngles(0,0,0),o.enabled=!0,o.rigidbody.applyImpulse(this.force)};var Bullet=pc.createScript("bullet");(Bullet=pc.createScript("bullet")).attributes.add("muzzleparticle",{type:"entity"}),Bullet.prototype.initialize=function(){this.force=new pc.Vec3,this.timer=0;new pc.Vec3},Bullet.prototype.Fireglock=function(e){return this.force=new pc.Vec3,e=new pc.Entity,this.app.root.findByName("Camera").addChild(e),e.addComponent("model",{type:"box"}),e.setLocalScale(.1,.1,.2),e.setLocalPosition(0,0,-.8),e.addComponent("rigidbody"),e.rigidbody.type=pc.BODYTYPE_DYNAMIC,e.addComponent("collision"),e.collision.halfExtents=.1,this.force.copy(e.forward).scale(2500),e.rigidbody.applyForce(this.force),this.app.root.findByName("Camera").removeChild(e),e},Bullet.prototype.update=function(e){this.timer+=e,this.app.mouse.isPressed(pc.MOUSEBUTTON_LEFT)&&this.timer>.1&&(this.Fireglock(),this.timer=0,this.app.mouse.isPressed(pc.MOUSEBUTTON_LEFT)&&this.app.root.findByName("muzzleflash").particlesystem.play())};var Weapon=pc.createScript("weapon");Weapon.attributes.add("camera",{type:"entity"}),Weapon.attributes.add("glock",{type:"entity"}),Weapon.attributes.add("muzzleflashglock",{type:"entity"}),Weapon.prototype.initialize=function(){this.ammo_glock=0,this.magsize_glock=18,this.rem_magammo_glock=18,this.force=new pc.Vec3,this.firstirpos=new pc.Vec3,this.timer=0;new pc.Vec3;this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.lerpedRotation=new pc.Vec3,this.lerpedRotation_s=new pc.Vec3,this.Recoilspeed=2,this.glockfirstpos=this.glock.getLocalPosition(),this.AimingDownSights=!1},Weapon.prototype.Fireglock=function(t){this.force=new pc.Vec3,this.bullet=new pc.Entity,this.camera.addChild(this.bullet),this.bullet.addComponent("model",{type:"sphere"}),this.bullet.model.color=pc.Color.BLACK,this.bullet.tags.add("bullet"),this.bullet.setLocalScale(.1,.1,.2),this.bullet.setLocalPosition(0,0,-.8),this.bullet.addComponent("model"),this.bullet.addComponent("rigidbody"),this.bullet.rigidbody.type=pc.BODYTYPE_DYNAMIC,this.bullet.addComponent("collision"),this.bullet.collision.halfExtents=.1,this.force.copy(this.bullet.forward).scale(50),this.bullet.rigidbody.applyImpulse(this.force),this.camera.removeChild(this.bullet),this.app.root.addChild(this.bullet),this.bullet.collision.on("collisionstart",this.BulletDelete,this)},Weapon.prototype.BulletDelete=function(){this.bullet&&this.bullet.destroy()},Weapon.prototype.Reloadglock=function(t){var o;this.ammo_glock>18?(this.entity.sound.play("Reload"),t=this.magsize_glock-this.rem_magammo_glock,this.ammo_glock=this.ammo_glock-t,this.rem_magammo_glock=18):(o=this.rem_magammo_glock+this.ammo_glock)>18?(this.rem_magammo_glock=18,this.ammo_glock=o-18):(this.rem_magammo_glock=o,this.ammo_glock=0)},Weapon.prototype.update=function(t){this.RecoilGlock=!1,this.timer+=t,this.firstirpos=this.glock.getLocalPosition(),this.app.mouse.isPressed(pc.MOUSEBUTTON_RIGHT)?(this.glock.setLocalPosition(.013,-.229,this.firstirpos.z),this.AimingDownSights=!0):this.glock.setLocalPosition(.399,-.434,this.firstirpos.z),this.app.mouse.isPressed(pc.MOUSEBUTTON_LEFT)&&this.timer>.1&&this.rem_magammo_glock>0&&(this.Fireglock(),this.RecoilGlock=!0,this.timer=0,this.rem_magammo_glock=this.rem_magammo_glock-1,this.entity.sound.play("Shoot")),this.app.keyboard.isPressed(pc.KEY_R)&&this.ammo_glock>0&&this.rem_magammo_glock<18&&this.Reloadglock()};var FirstPersonMovement=pc.createScript("firstPersonMovement");FirstPersonMovement.attributes.add("camera",{type:"entity",description:"Optional, assign a camera entity, otherwise one is created"}),FirstPersonMovement.attributes.add("power",{type:"number",default:2500,description:"Adjusts the speed of player movement"}),FirstPersonMovement.attributes.add("lookSpeed",{type:"number",default:.25,description:"Adjusts the sensitivity of looking"}),FirstPersonMovement.attributes.add("weaponcontroller",{type:"entity"}),FirstPersonMovement.attributes.add("muzzlelight",{type:"entity"}),FirstPersonMovement.attributes.add("jumpHigh",{type:"number",default:2}),FirstPersonMovement.prototype.initialize=function(){this.force=new pc.Vec3,this.eulers=new pc.Vec3,this.eulers.z=0,this.lerpspeed=1;var e=this.app;e.mouse.enablePointerLock(),e.mouse.on("mousemove",this._onMouseMove,this),e.mouse.on("mousedown",(function(){e.mouse.enablePointerLock()}),this),this.speed=5},FirstPersonMovement.prototype.update=function(e){this.camera||this._createCamera();var t=this.force,s=this.app,i=this.camera.forward,o=this.camera.right,r=0,a=0;s.keyboard.isPressed(pc.KEY_A)&&(r-=o.x,a-=o.z),s.keyboard.isPressed(pc.KEY_D)&&(r+=o.x,a+=o.z),s.keyboard.isPressed(pc.KEY_W)&&(r+=i.x,a+=i.z),s.keyboard.isPressed(pc.KEY_S)&&(r-=i.x,a-=i.z),this.app.keyboard.isPressed(pc.KEY_SHIFT)&&this.app.keyboard.isPressed(pc.KEY_W)&&0!==r&&0!==a&&(t.set(r,0,a).normalize().scale(1.1*this.power),this.entity.rigidbody.applyForce(t)),s.keyboard.wasPressed(pc.KEY_SPACE)&&this.entity.getPosition().y<this.jumpHigh&&this.entity.rigidbody.applyImpulse(0,500,0),0!==r&&0!==a&&(t.set(r,0,a).normalize().scale(this.power),this.entity.rigidbody.applyForce(t)),this.muzzlelight.light.enabled=!1,this.glockrecoil=this.eulers.y+2,!0===this.weaponcontroller.script.weapon.RecoilGlock&&(this.eulers.y=this.glockrecoil,this.muzzlelight.light.enabled=!0),this.adjustedmousey=pc.math.clamp(this.eulers.y,-89,89),this.camera.setLocalEulerAngles(this.adjustedmousey,this.eulers.x,0)},FirstPersonMovement.prototype._onMouseMove=function(e){(pc.Mouse.isPointerLocked()||e.buttons[0])&&(this.eulers.x-=this.lookSpeed*e.dx,this.eulers.y-=this.lookSpeed*e.dy)},FirstPersonMovement.prototype._createCamera=function(){this.camera=new pc.Entity,this.camera.setName("First Person Camera"),this.camera.addComponent("camera"),this.entity.addChild(this.camera),this.camera.translateLocal(0,.5,0)};var Glockammmopickup=pc.createScript("glockammmopickup");Glockammmopickup.attributes.add("weaponcontroller",{type:"entity"}),Glockammmopickup.attributes.add("player",{type:"entity"}),Glockammmopickup.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.onTriggerEnter,this)},Glockammmopickup.prototype.onTriggerEnter=function(o){if(o.tags.has("player")){this.weaponcontroller.script.weapon.ammo_glock;this.weaponcontroller.script.weapon.ammo_glock=this.weaponcontroller.script.weapon.ammo_glock+50,this.entity.sound.play("Ammo"),this.entity.destroy()}},Glockammmopickup.prototype.update=function(o){};var Ammodisplay=pc.createScript("ammodisplay");Ammodisplay.attributes.add("weaponcontroller",{type:"entity"}),Ammodisplay.prototype.initialize=function(){},Ammodisplay.prototype.update=function(t){var o=this.weaponcontroller.script.weapon.ammo_glock,e=this.weaponcontroller.script.weapon.rem_magammo_glock;this.entity.element.text=e+"/"+o};var Healthdisplay=pc.createScript("healthdisplay");Healthdisplay.attributes.add("player",{type:"entity"}),Healthdisplay.prototype.initialize=function(){},Healthdisplay.prototype.update=function(t){var e=this.player.script.health.health;this.entity.element.text="HP: "+e};var Enemy=pc.createScript("enemy");Enemy.attributes.add("player",{type:"entity"}),Enemy.attributes.add("enemyspeed",{type:"number"}),Enemy.attributes.add("enemyreach",{type:"number"}),Enemy.attributes.add("enemyDamage",{type:"number"}),Enemy.attributes.add("enemyhealth",{type:"number"}),Enemy.attributes.add("points",{type:"entity"}),Enemy.prototype.initialize=function(){playerPos=new pc.Vec3,this.entity.collision.on("collisionstart",this.onCollisionStart,this),this.player.seen=!1},Enemy.prototype.onCollisionStart=function(t){t.other.tags.has("bullet")&&(this.enemyhealth=this.enemyhealth-25,t.other.destroy())},Enemy.prototype.AttackPlayer=function(){this.player.script.health.health=this.player.script.health.health-this.enemyDamage},Enemy.prototype.update=function(t){playerPos=this.player.getPosition();var e=this.app.systems.rigidbody.raycastFirst(this.entity.getPosition(),this.player.getPosition());e&&e.entity.tags.has("player")&&(this.entity.lookAt(e.entity.getPosition().x,this.entity.getPosition().y,e.entity.getPosition().z),this.player.seen=!0,this.lastseenpos=new pc.Vec3,this.lastseenpos.copy(this.player.getPosition()),this.entity.getPosition().distance(this.player.getPosition())>this.enemyreach?(this.LocalZ=new pc.Vec3,this.LocalZ.copy(this.entity.forward).scale(this.enemyspeed),this.entity.translateLocal(0,0,-this.enemyspeed*t)):this.AttackPlayer()),e&&!1===e.entity.tags.has("player")&&!0===this.player.seen&&this.lastseenpos!==this.entity.getPosition&&(this.tempposthing=new pc.Vec3,this.entity.translateLocal(0,0,-this.enemyspeed*t)),0===this.enemyhealth&&(this.entity.destroy(),this.points.script.pointsdisplay.points++)};var Health=pc.createScript("health");Health.prototype.initialize=function(){this.health=100,this.oldHierarchy=this.app.root.findByName("Root")},Health.prototype.update=function(t){0===this.health&&(this.oldHierarchy.destroy(),this.app.scenes.loadSceneHierarchy(1169898))};var Pointsdisplay=pc.createScript("pointsdisplay");Pointsdisplay.attributes.add("sceneId",{type:"string",default:"0"}),Pointsdisplay.attributes.add("level2Points",{type:"number",default:6}),Pointsdisplay.attributes.add("level3Points",{type:"number",default:7}),Pointsdisplay.attributes.add("Wall1",{type:"entity"}),Pointsdisplay.attributes.add("Wall2",{type:"entity"}),Pointsdisplay.prototype.initialize=function(){this.points=0},Pointsdisplay.prototype.update=function(t){this.entity.element.text="Points: "+this.points,this.points==this.level2Points&&(this.Wall1.enabled=!1),this.points==this.level3Points&&(this.Wall2.enabled=!1),30==this.points&&this.loadScene(this.sceneId,(function(){oldHierarchy.destroy()}))};var SpawnEnemy=pc.createScript("spawnEnemy");SpawnEnemy.attributes.add("enemy",{type:"entity"}),SpawnEnemy.prototype.initialize=function(){for(i=0;i<10;i++)this.enemy.clone()},SpawnEnemy.prototype.update=function(e){};var Pause=pc.createScript("pause");Pause.attributes.add("pauseText",{type:"entity"}),Pause.prototype.initialize=function(){this.paused=!1},Pause.prototype.update=function(e){this.app.keyboard.wasPressed(pc.KEY_P)&&this.togglePaused()},Pause.prototype.togglePaused=function(){this.paused?(this.app.timeScale=1,this.pauseText.enabled=!1):(this.app.timeScale=0,this.pauseText.enabled=!0),this.paused=!this.paused};var Startbutton=pc.createScript("startbutton");Startbutton.attributes.add("sceneId",{type:"string",default:"0",title:"Scene ID to Load"}),Startbutton.prototype.initialize=function(){this.entity.element.on("mouseenter",this.onEnter,this),this.entity.element.on("mousedown",this.onPress,this),this.entity.element.on("mouseup",this.onRelease,this),this.entity.element.on("mouseleave",this.onLeave,this),this.entity.element.on("touchstart",this.onPress,this),this.entity.element.on("touchend",this.onRelease,this)},Startbutton.prototype.onPress=function(t){var e=this.app.root.findByName("Root");this.loadScene(this.sceneId,(function(){e.destroy()}))},Startbutton.prototype.update=function(t){},Startbutton.prototype.loadScene=function(t,e){var n=t+".json";this.app.loadSceneHierarchy(n,(function(t,n){t?console.error(t):e(n)}))};